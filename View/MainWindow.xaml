<Window x:Class="View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:View"
        xmlns:vm="clr-namespace:ViewModel;assembly=ViewModel"
        mc:Ignorable="d"
        Title="SharpTodo" Height="449.447" Width="616.638">
    <Window.DataContext>
        <vm:VMMainWindow/>
    </Window.DataContext>
    <Window.Resources>
        <DataTemplate x:Key = "todoTemplate">

            <StackPanel Orientation = "Horizontal">
                <CheckBox IsChecked="{Binding Path= Completed}"></CheckBox>
                <TextBlock Text="{Binding Path= Text}"></TextBlock>
            </StackPanel>

        </DataTemplate>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            
            <RowDefinition Height="0.5*"></RowDefinition>
            <RowDefinition></RowDefinition>

        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition></ColumnDefinition>
            <ColumnDefinition></ColumnDefinition>
        </Grid.ColumnDefinitions>

        <!--Elements-->
        <Menu Width="auto" Height="25" Grid.ColumnSpan="2" VerticalAlignment="Top">
            <MenuItem Header="Options" Click="MenuItem_Click"></MenuItem>
        </Menu>
        <StackPanel Name="StackPanelButtons" VerticalAlignment="Bottom" Margin="10">
            <Button Name="ButtonFetch" Command="{Binding FetchCommand}"  Style="{StaticResource UIButton}">Fetch Todo-List</Button>

            <Button Name="ButtonCreate" Command="{Binding CreateCommand}"  Style="{StaticResource UIButton}">Create new Todo</Button>
            
            <Button Name="ButtonDelete" Command="{Binding DeleteCommand}" CommandParameter="{Binding ElementName=ListBoxTodos, Path=SelectedItem}" Style="{StaticResource UIButton}">Delete selected Todo</Button>
            
        </StackPanel>


        <ListBox Name="ListBoxTodos" ItemsSource="{Binding TodoList}" ItemTemplate="{StaticResource todoTemplate}" VerticalAlignment="Stretch" Grid.Row="1" Margin="10"  ></ListBox>

        <StackPanel Name="StackPanelTodoDetails" Grid.Column="1" Grid.Row="1" Margin="10">
            <TextBlock Style="{StaticResource UITextBlock}">Title: </TextBlock>
            <TextBox Name="TextBoxTitle" MinWidth="200" Text="{Binding ElementName=ListBoxTodos, Path=SelectedItem.Text}" Style="{StaticResource UITextBox}"></TextBox>
            <TextBlock Style="{StaticResource UITextBlock}">Description:</TextBlock>
            <TextBox Name="TextBoxDesc" MinWidth="200" MinLines="3" Text="{Binding ElementName=ListBoxTodos, Path=SelectedItem.Notes}" Style="{StaticResource UITextBox}"></TextBox>
            
            <!--<StackPanel Orientation="Horizontal" Margin="0,10,0,0">

                <ComboBox Name="ComboBoxChecklist" ItemsSource="{Binding ElementName=ListBoxTodos, Path=SelectedItem.Checklist}" Margin="10,0"></ComboBox>
                
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                <CheckBox IsChecked="{Binding ElementName=ComboBoxChecklist, Path=SelectedItem.Completed}" Margin="10,0"></CheckBox>
                <TextBox Name="TextBoxChecklistItem" MinWidth="200" Text="{Binding ElementName=ComboBoxChecklist, Path=SelectedItem.Text}"></TextBox>
            </StackPanel>
            -->

            <TextBlock ToolTip="Format: DD.MM.YYYY" Margin="10,0" Style="{StaticResource UITextBlock}">Due on: </TextBlock>

            <DatePicker Text="{Binding ElementName=ListBoxTodos, Path=SelectedItem.DueDate}"/>
            <Button Name="ButtonSave" Command="{Binding SendCommand}" CommandParameter="{Binding ElementName=ListBoxTodos, Path=SelectedItem}" Style="{StaticResource UIButton}">Save Changes</Button>
            
        </StackPanel>
        <TextBlock Name="TextBlockError" Grid.Column="1" Padding="0,20,0,0" Style="{StaticResource UIErrorTextBlock}"  Text="{Binding ErrorMsg}" />

    </Grid>
</Window>